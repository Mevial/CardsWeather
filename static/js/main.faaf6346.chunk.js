(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{111:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(28),i=n.n(c),s=(n(111),n(70)),o=n.n(s),u=n(86),d=n.n(u),l=n(13),p=n(188),h=n(196),f=n(186),m=n(191),j=n(190),b=n(22),x=n(30),O=n.n(x),g=n(41),v=n(38),y=n(15),C=n(59),S=n(54),W=n.n(S),w="161e3d9231985b40493daa0a166386ca",I="&units=metric",_=W.a.create({baseURL:"https://api.openweathermap.org/data/2.5/weather"}),k=function(e){return _.get("?q=".concat(e,"&appid=").concat(w).concat(I))},F=function(e){return _.get("?id=".concat(e,"&appid=").concat(w).concat(I))},N=n(71),L=n.n(N),M=W.a.create({baseURL:"https://countriesnow.space/api/v0.1/"}),T=function(){return M.get("countries")},z={cities:[],weather:{clouds:{all:0},coord:{lon:0,lat:0},dt:0,id:0,main:{temp:0,pressure:0,humidity:0,feels_like:0,temp_max:0,temp_min:0},name:"",sys:{id:0,country:"",sunrise:0,type:0,sunset:0},wind:{speed:0,deg:0,gust:0}},isLoading:!1,response:{status:0,message:""},toggle:!1},B=Object(C.b)({name:"current-weather",initialState:z,reducers:{setItemLocalStorage:function(e,t){e.cities=Object(y.a)(t.payload.testValue)},changeToggle:function(e,t){e.toggle=t.payload},fetchCurrentWeather:function(e){e.isLoading=!0},fetchCurrentWeatherSuccess:function(e,t){e.isLoading=!1,e.weather=t.payload.data,e.response={status:t.payload.status,message:t.payload.statusText}},fetchCurrentWeatherError:function(e,t){e.isLoading=!1,e.response={status:t.payload.status,message:t.payload.statusText}},removeWeatherCard:function(e,t){var n=e.cities.findIndex((function(e){return e.id===t.payload}));n>-1&&e.cities.splice(n,1)},addCityWeatherCard:function(e,t){var n=t.payload.id;e.cities.find((function(e){return e.id===n}))||e.cities.unshift(t.payload),localStorage.setItem("value",JSON.stringify(Object(y.a)(e.cities)))},updateCityWeatherCard:function(e,t){var n=t.payload.id,a=e.cities.findIndex((function(e){return e.id===n}));a>-1&&(e.cities[a]=Object(v.a)({},t.payload))}}}),E=B.actions,Y=E.removeWeatherCard,A=E.addCityWeatherCard,R=E.updateCityWeatherCard,J=E.changeToggle,P=E.setItemLocalStorage,q=B.reducer,D=function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(B.actions.fetchCurrentWeather()),t.next=4,F(e);case 4:a=t.sent,n(R({name:a.data.name,id:a.data.id,country:a.data.sys.country,temp:a.data.main.temp,humidity:a.data.main.humidity,press:a.data.main.pressure,speed:a.data.wind.speed,time:L()().format("MMMM Do YYYY, h:mm:ss a")})),200===a.status?n(B.actions.fetchCurrentWeatherSuccess(a)):n(B.actions.fetchCurrentWeatherError(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},V=n(72),G=n.n(V),H=n(187),U=n(198),K=n(2);function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout(t,e)}))}function X(){var e=a.useState(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=a.useState([]),i=Object(l.a)(c,2),s=i[0],o=i[1],u=n&&0===s.length;return a.useEffect((function(){var e=!0;if(u)return Object(g.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(1e3);case 2:e&&o([].concat(Z));case 3:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[u]),a.useEffect((function(){n||o([])}),[n]),Object(K.jsx)(H.a,{id:"asynchronous-demo",sx:{width:300},open:n,onOpen:function(){r(!0)},onClose:function(){r(!1)},isOptionEqualToValue:function(e,t){return e.title===t.title},getOptionLabel:function(e){return e.title},options:s,loading:u,renderInput:function(e){return Object(K.jsx)(p.a,Object(v.a)(Object(v.a)({},e),{},{label:"Work in progress...",InputProps:Object(v.a)(Object(v.a)({},e.InputProps),{},{endAdornment:Object(K.jsxs)(a.Fragment,{children:[u?Object(K.jsx)(U.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}})}var Z=[{title:"Minsk"},{title:"Brest"},{title:"Gomel"},{title:"Grodno"},{title:"Mogilev"},{title:"Vicebsk"}],$=r.a.memo((function(e){var t=e.addItem,n=Object(b.b)(),r=Object(a.useState)(""),c=Object(l.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(null),u=Object(l.a)(o,2),d=u[0],x=u[1],O=Object(b.c)((function(e){return e.currentWeatherSliceReducer.cities})),g=Object(b.c)((function(e){return e.currentWeatherSliceReducer.toggle})),v=function(){""!==i.trim()?(t(i),s("")):x("Title is required")},y=Object(a.useCallback)((function(e){n(J(e.currentTarget.checked))}),[n]);return Object(a.useEffect)((function(){var e;return g?O.length>0?(e=setInterval((function(){for(var e=0;e<O.length;e++)n(D(O[e].id))}),5e3),function(){return clearInterval(e)}):void 0:function(){return clearInterval(e)}}),[g,O,n]),Object(K.jsxs)("div",{className:G.a.Container,children:[Object(K.jsxs)("div",{className:G.a.CityForm,children:[Object(K.jsx)(p.a,{variant:"outlined",error:!!d,value:i,onChange:function(e){s(e.currentTarget.value)},onSubmit:function(e){null!==d&&x(null),v()},label:"City",helperText:d,color:"secondary"}),Object(K.jsx)(h.a,{color:"primary",onClick:v,children:Object(K.jsx)(f.a,{})})]}),Object(K.jsxs)(m.a,{variant:"contained",size:"small",children:["update every 5sec ",Object(K.jsx)(j.a,{color:"secondary",onChange:y})]}),Object(K.jsx)(X,{})]})})),ee=function(){var e=Object(b.b)();return Object(K.jsx)("div",{className:d.a.header,children:Object(K.jsx)("div",{children:Object(K.jsx)($,{addItem:function(t){var n;e((n=t,function(){var e=Object(g.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(B.actions.fetchCurrentWeather()),e.next=4,k(n);case 4:a=e.sent,t(A({name:a.data.name,id:a.data.id,country:a.data.sys.country,temp:a.data.main.temp,humidity:a.data.main.humidity,press:a.data.main.pressure,speed:a.data.wind.speed,time:L()().format("MMMM Do YYYY, h:mm:ss a")})),200===a.status?t(B.actions.fetchCurrentWeatherSuccess(a)):t(B.actions.fetchCurrentWeatherError(a)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),e(function(){var e=Object(g.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(B.actions.fetchCurrentWeather()),e.next=4,T();case 4:n=e.sent,console.log(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}})})})},te=n(193),ne=n(195),ae=n(194),re=n(192),ce=n(91),ie=n.n(ce),se=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.currentWeatherSliceReducer.cities}));return Object(K.jsx)(K.Fragment,{children:0===t.length?Object(K.jsx)("span",{className:ie.a.textNameWithoutCards,children:"you have no cities saved"}):t.map((function(n){var a=n.name,r=n.country,c=n.temp,i=n.humidity,s=n.press,o=n.speed,u=n.id;return Object(K.jsx)("div",{children:Object(K.jsxs)(te.a,{sx:{minWidth:275,minHeight:250,maxWidth:350,maxHeight:300},children:[Object(K.jsxs)(ae.a,{className:"Wrapper",children:[Object(K.jsxs)(re.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:["\u0413\u043e\u0440\u043e\u0434: ",a,", ",r]}),Object(K.jsxs)(re.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:["\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: ",Math.floor(c),"\xb0C"]}),Object(K.jsxs)(re.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:["\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c: ",i,"%"]}),Object(K.jsxs)(re.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:["\u0410\u0442\u043c\u043e\u0441\u0444\u0435\u0440\u043d\u043e\u0435 \u0434\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ",s," hpa"]}),Object(K.jsxs)(re.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:["\u0421\u0438\u043b\u0430 \u0432\u0435\u0442\u0440\u0430: ",o," \u041c/C"]}),Object(K.jsxs)(re.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:["\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445: ",n.time]})]}),Object(K.jsxs)(ne.a,{style:{justifyContent:"center"},children:[Object(K.jsx)(m.a,{variant:"contained",size:"small",color:"warning",onClick:function(){!function(n){var a=t.filter((function(e){return n!==e.id}));localStorage.setItem("value",JSON.stringify(a)),e(Y(n))}(u)},children:"Delete"}),Object(K.jsx)(m.a,{variant:"contained",size:"small",color:"success",onClick:function(){e(D(u))},children:"Refresh"})]})]})},n.id)}))})};var oe=function(){var e=Object(b.b)();return Object(a.useEffect)((function(){var t=localStorage.getItem("value");if(t){var n=JSON.parse(t);e(P({testValue:n}))}}),[e]),Object(K.jsxs)("div",{className:o.a.app,children:[Object(K.jsx)(ee,{}),Object(K.jsx)("div",{className:o.a.Cards,children:Object(K.jsx)(se,{})})]})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,199)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},de=n(26),le=Object(de.b)({currentWeatherSliceReducer:q}),pe=Object(C.a)({reducer:le,middleware:function(e){return e({serializableCheck:!1})}});window.store=pe,i.a.render(Object(K.jsx)(b.a,{store:pe,children:Object(K.jsx)(r.a.StrictMode,{children:Object(K.jsx)(oe,{})})}),document.getElementById("root")),ue()},70:function(e,t,n){e.exports={app:"App_app__om1oB",Cards:"App_Cards__1ykIJ",header:"App_header__2FE9L"}},72:function(e,t,n){e.exports={Container:"AddItemForm_Container__25mbA",CityForm:"AddItemForm_CityForm__1gYqo"}},86:function(e,t,n){},91:function(e,t,n){e.exports={textNameWithoutCards:"WeatherCard_textNameWithoutCards__3jFcm"}}},[[138,1,2]]]);
//# sourceMappingURL=main.faaf6346.chunk.js.map